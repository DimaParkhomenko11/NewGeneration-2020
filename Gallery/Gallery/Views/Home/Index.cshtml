@{
    ViewBag.Title = "Home Page";
}

@using Gallery.Controllers
@using Gallery.ConfigManagement
@{
    ConfigurationManagement Config = new ConfigurationManagement();
 
    // Directory path with all User's directories
    string ImagesDirPath = Server.MapPath(Config.СheckValuePathToPhotos());

    // Encrypted User's directory path
    string DirPath = Server.MapPath(Config.СheckValuePathToPhotos()) ;

    // Directory path with temp files
    string TempDirPath = Server.MapPath("~/Content/Temp");

    if (!Directory.Exists(ImagesDirPath))
    {
        Directory.CreateDirectory(ImagesDirPath);
    }

    if (!Directory.Exists(TempDirPath))
    {
        Directory.CreateDirectory(TempDirPath);
    }

    if (!Directory.Exists(DirPath) )
    {
        Directory.CreateDirectory(DirPath);
    }

    
   
    int i = 0;

    //The Modal

    <div id="myModal" class="modal">
        <img class="modal-content" id="img01">
        <div id="caption"></div>
    </div>
    <script>
        // Get the modal
        var modal = document.getElementById('myModal');
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("modal")[0];

        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
            modal.style.display = "none";
        }
    </script>
    
       List<string> filesname = Directory.GetFiles(Server.MapPath(Config.СheckValuePathToPhotos())).ToList<string>();

        foreach (string fl in filesname)
        {
            i++;
            HomeController.LoadExifData(fl);

            <div class="body">
                <div class="bodyT">

                    <p class="textT">
                        <b>Photo title: @HomeController.title</b>
                    </p>
                    <p class="textT">
                        <b>Manufacturer of the camera: @HomeController.cameraManufacturer</b>
                    </p>
                    <p class="textT">
                        <b>Model of the camera: @HomeController.modelOfCamera</b>
                    </p>
                    <p class="textT">
                        <b>File size: @HomeController.fileSize</b>
                    </p>
                    <p class="textT">
                        <b>Date of creation of the photo: @HomeController.dateCreation</b>
                    </p>
                    <p class="textT">
                        <b>Date of uploading of the photo: @HomeController.dateUpload</b>
                    </p>
                </div>

                <div class="hov">
                    <a class="picture">
                        <img id="@i" class="pictureIMG" src="~/Content/Images/@Path.GetFileName(fl)" alt="@Path.GetFileName(fl)">
                    </a>
                    
                </div>

                <script>
            // Get the image and insert it inside the modal - use its "alt" text as a caption
            var img = document.getElementById("@i");
            var modalImg = document.getElementById("img01");
            var captionText = document.getElementById("caption");
            img.onclick = function () {
                modal.style.display = "block";
                modalImg.src = this.src;
                captionText.innerHTML = this.alt;
            }
                </script>


            </div>
        }
    
}